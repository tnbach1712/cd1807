name: Azure Pipelines

# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml
trigger:
- main

pool:
  name: default

variables:
  python.version: '3.7.6'
  azureServiceConnectionId: 'e56e48d6-bf0d-48af-90e1-f5ed15400daa' #'myServiceConnection'
  projectRoot: $(System.DefaultWorkingDirectory)
  environmentName: 'test'
  backendAzureRmResourceGroupName: 'bachtn-demo'
  backendAzureRmStorageAccountName: 'tfstate2176126194'
  backendAzureRmContainerName: 'tfstate'

stages:

- stage: Build
  jobs:
  - job: BuildInfrastructure
    steps:
    - task: CmdLine@2
      displayName: Terraform version
      inputs:
        script: 'echo $(terraform -v)'
        workingDirectory: $(System.DefaultWorkingDirectory)
        